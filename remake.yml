
target_default: data/cleaned_data/covid19_africa_cleaned_tweets_2020_04_23_02_15_pm.csv

packages:
  - tidyverse
  - tm
  - umap
  - cld2
  - rvest
  - rtweet
  - tidytext
  - textstem
  
file_extensions:
  - csv
  
sources:
  - scripts/etl_functions.R

targets:

  accounts:
    command: load_accounts(accounts_fp='data/data_dump/accounts.csv')

  inputted_accounts:
    command: read_accounts(file='data/africa_news_sites_input.csv')
    
  cleaned_inputs:
    command: clean_inputted_accounts(inputted_accounts)
  
  accounts_new:
    command: identify_new_accounts(cleaned_inputs, accounts)
    
  tweets_all:
    command: fetch_tweets(accounts_new, only_new_accounts=TRUE)
    
  tweets_covid19:
    command: extract_covid19_tweets(tweets_all)
  
  updated_accounts:
    command: updating_accounts_metadata(accounts_new, tweets_covid19)
  
  data/data_dump/covid19_africa_raw_tweets_2020_04_23_02_15_pm.csv:
    command: write_csv(tweets_covid19, target_name)
    
  cleaned_tweets:
    command: clean_data(tweets_covid19)
  
  cleaned_and_modeled_tweets:
    command: model_tweets_topic(cleaned_tweets, new_model=TRUE)
    
  all_cleaned_tweets:
    command: combine_and_cache_cleaned_tweets(cleaned_and_modeled_tweets)

  data/covid_19_africa.csv:
    command: write_csv(all_cleaned_tweets, target_name)
    
  data/cleaned_data/covid19_africa_cleaned_tweets_2020_04_23_02_15_pm.csv:
    command: write_csv(cleaned_and_modeled_tweets, target_name)

 